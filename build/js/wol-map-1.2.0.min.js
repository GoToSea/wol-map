/*! WolMao v1.2.0 | (c) aegean | Created on 2017/3/7 */
/*! 基于Openlayers的地图常用功能封装，实现地图的简单快速开发，依赖Openlayers v4.1.1版本 /*
/*! Modified on 2018/01/19 */
!function(a){a.DragHandler=a.DragHandler||{},DragHandler.startDrag=function(a,b){var c=$(b),d=c.parent(),e=a.clientX||a.pageX||a.screenX,f=a.clientY||a.pageY||a.screenY,g=parseFloat(d.css("margin-left")),h=parseFloat(d.css("margin-top")),i=parseFloat(c.css("margin-left")),j=parseFloat(c.css("margin-top")),k=e-g-i,l=f-h-j;c.attr("conMarginL",g),c.attr("conMarginT",h),c.attr("mouseOffsetX",k),c.attr("mouseOffsetY",l)},DragHandler.dragging=function(a,b,c){var d=$(b),e=a.clientX||a.pageX||a.screenX,f=a.clientY||a.pageY||a.screenY,g=d.attr("conMarginL"),h=d.attr("conMarginT"),i=d.attr("mouseOffsetX"),j=d.attr("mouseOffsetY"),k=e-g-i,l=f-h-j;if(d.css("margin-left",k),d.css("margin-top",l),c instanceof Function){c(d,{dragMarginL:k,dragMarginT:l})}},DragHandler.endDrag=function(a,b){},DragHandler.allowDrop=function(a){a.preventDefault()}}(window),function(a){function b(a,b){var c,d,e,f,g={},h=b.exclude;h=h||[],h=h instanceof Array?h:[h];for(var i=0;i<a.length;i++){c=a[i];for(var j=0;j<h.length;j++)if(c.get("name")===h[j]){e=!0;break}e?e=!1:(d=c.get("group"),void 0===g[d]&&(g[d]=[]),f={name:c.get("name"),label:c.get("label"),type:c.get("type"),zIndex:c.getZIndex(),checked:c.getVisible()},g[d].push(f))}return g}function c(a){var b,c,d=[];for(var e in a)if("undefined"===e){c=a[e];for(var f=0;f<c.length;f++)b={open:!0,checked:c[f].checked,iconSkin:"layerIcon",name:c[f].label,layerName:c[f].name,type:c[f].type,zIndex:c[f].zIndex},d.push(b)}else{c=a[e],b={open:!1,nocheck:!0,iconSkin:"layersIcon",name:e,children:[]};for(var f=0;f<c.length;f++)b.children.push({open:!0,checked:c[f].checked,iconSkin:"layerIcon",name:c[f].label,layerName:c[f].name,type:c[f].type,zIndex:c[f].zIndex});d.push(b)}return d}a.wol=a.wol||{};wol.LayerManager=function(a){function d(b){function c(a,b){return $.fn.zTree.getZTreeObj("treeDemo").selectNode(b),!1}function d(a,b,c){var d="#"+c.tId+"_a";$(d).removeClass("curSelectedNode")}function e(b,c,d){var e=d.layerName,f=a.getLayerByName(e);d.checked?f.setVisible(!0):f.setVisible(!1)}var f={view:{selectedMulti:!1},edit:{enable:!0},check:{enable:!0},data:{simpleData:{enable:!0}},callback:{beforeEditName:c,onClick:d,onCheck:e}};$.fn.zTree.init($("#wolLayerTree0"),f,b)}function e(){var a=b(f,i);g=c(a),d(g)}var f,g,h=a.getMap(),i={exclude:[]};this.init=function(j){i=wol.util.extend(i,j);var k;if(void 0===i.target){if(k=$(a.getMap().getTargetElement()),k.attr("has-tree"))return;k.append('<div class="layer-manager-container in-map pos-absolute" draggable="true" ondragstart="DragHandler.startDrag(event, this)"ondrag="DragHandler.dragging(event, this)" ondragend="DragHandler.endDrag(event, this)"><h4>图层控制</h4><div><ul id="wolLayerTree0" class="ztree"></ul></div></div>')}else{if(k=$("#"+i.target),k.attr("has-tree"))return;k.append('<div class="layer-manager-container normal"><div><ul id="wolLayerTree0" class="ztree"></ul></div></div>')}k.attr("has-tree",!0),f=h.getLayers().getArray();var l=b(f,i);g=c(l),d(g),a.register("addLayer",e),a.register("removeLayer",e)},this.getMap=function(){return h},this.getLayers=function(){return f},this.getTreeData=function(){return g}}}(window),function(a){a.wol=a.wol||{},wol.Locator=function(a){var b,c=a,d={STATIC:new ol.style.Style({stroke:new ol.style.Stroke({color:"#00afcc",width:2}),fill:new ol.style.Fill({color:"#00e3ff"}),image:new ol.style.Circle({stroke:new ol.style.Stroke({color:"#8fedce",width:2}),fill:new ol.style.Fill({color:"#00c38a"}),radius:8})}),FLASH:new ol.style.Style({stroke:new ol.style.Stroke({color:"#ff93a8",width:2}),fill:new ol.style.Fill({color:"#ff607f"}),image:new ol.style.Circle({stroke:new ol.style.Stroke({color:"#ff93a8",width:2}),fill:new ol.style.Fill({color:"#ff607f"}),radius:8})})};this.getMapViewer=function(){return c},this.getLocateLayer=function(){return b},this.getLocateSource=function(){return b.getSource()},this.getStaticStyle=function(){return d.STATIC},this.setStaticStyle=function(a){d.STATIC=a,this.getLocateLayer().setStyle(a)},this.getFlashStyle=function(){return d.FLASH},this.setFlashStyle=function(a){d.FLASH=a},this.getPiStrokeColor=function(){return d.FLASH.getImage().getStroke().getColor()},this.getPiFillColor=function(){return d.FLASH.getImage().getFill().getColor()},this.getPiRadius=function(){return d.FLASH.getImage().getRadius()},this.getLsStrokeColor=function(){return d.FLASH.getStroke().getColor()},this.getPlStrokeColor=function(){return d.FLASH.getStroke().getColor()},this.getPlFillColor=function(){return d.FLASH.getFill().getColor()},function(){b=wol.util.createVectorLayer({name:"locateLayer"+(new Date).getTime(),label:"定位图层",style:d.STATIC,updateWhileAnimating:!0,zIndex:30}),a.addLayer(b)}()},wol.Locator.prototype.locate=function(a,b){if(a.get("locating"))return void console.warn("The feature is being located.");a.set("locating",!0),b=wol.util.extend(!0,{duration:0,times:3,autoView:!0},b),this.locateProxy(a,b.duration,b.times,b.autoView)},wol.Locator.prototype.locateProxy=function(a,b,c,d){d&&this.getMapViewer().getView().fit(a.getGeometry(),{size:mapViewer.getMap().getSize(),padding:[50,50,50,50],duration:600});var e=this,f=!1,g=a.clone(),h="locate"+g.getGeometry().getType(),i=g.getGeometry().getType();if("Point"!=i&&"LineString"!=i&&"Polygon"!=i)return void console.error("Unsupported type of feature to locate.");if("Point"==i&&(f=!1),c>0){var j=0,k=setInterval(function(){if(++j>c-1)return clearInterval(k),a.set("locating",!1),void(f&&e.getLocateSource().removeFeature(g));e[h](g,b)},b);e[h](g,b)}else setTimeout(function(){a.set("locating",!1),f&&e.getLocateSource().removeFeature(g)},b)},wol.Locator.prototype.locatePoint=function(a,b){function c(c){var h=c.vectorContext,i=c.frameState,j=a.getGeometry(),k=i.time-g,l=k/b,m=e.createPointFlashStyle(l,5,e.getPiRadius());if(h.setStyle(m),h.drawGeometry(j),k>b)return void ol.Observable.unByKey(d);f.render()}var d,e=this,f=e.getMapViewer().getMap(),b=b,g=(new Date).getTime();d=f.on("postcompose",c),f.render()},wol.Locator.prototype.locateLineString=function(a,b){function c(c){var h=c.vectorContext,i=c.frameState,j=a.getGeometry(),k=i.time-g,l=k/b,m=e.createLineFlashStyle(l);if(h.setStyle(m),h.drawGeometry(j),k>b)return ol.Observable.unByKey(d),void f.render();f.render()}var d,e=this,f=e.getMapViewer().getMap(),b=b,g=(new Date).getTime();d=f.on("postcompose",c),f.render()},wol.Locator.prototype.locatePolygon=function(a,b){function c(c){var h=c.vectorContext,i=c.frameState,j=a.getGeometry(),k=i.time-g,l=k/b,m=e.createAreaFlashStyle(l);if(h.setStyle(m),h.drawGeometry(j),k>b)return ol.Observable.unByKey(d),void f.render();f.render()}var d,e=this,f=e.getMapViewer().getMap(),b=b,g=(new Date).getTime();d=f.on("postcompose",c),f.render()},wol.Locator.prototype.createPointFlashStyle=function(a,b,c){var d=this,e=ol.easing.easeOut(a)*c+b,f=ol.easing.easeOut(1-a),g=wol.util.getColorArray(d.getPiStrokeColor());return new ol.style.Style({image:new ol.style.Circle({radius:e,snapToPixel:!1,stroke:new ol.style.Stroke({color:"rgba("+g[0]+", "+g[1]+", "+g[2]+", "+f+")",width:2.2})})})},wol.Locator.prototype.createLineFlashStyle=function(a){var b=this,c=ol.easing.upAndDown(1-a),d=wol.util.getColorArray(b.getLsStrokeColor());return new ol.style.Style({stroke:new ol.style.Stroke({color:"rgba("+d[0]+", "+d[1]+", "+d[2]+", "+c+")",width:4})})},wol.Locator.prototype.createAreaFlashStyle=function(a){var b=this,c=ol.easing.upAndDown(a),d=wol.util.getColorArray(b.getPlStrokeColor()),e=wol.util.getColorArray(b.getPlFillColor());return new ol.style.Style({stroke:new ol.style.Stroke({color:"rgba("+d[0]+", "+d[1]+", "+d[2]+", "+c+")",width:4}),fill:new ol.style.Fill({color:"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+c+")"})})}}(window),function(a){function b(a){a.animateParam.flashCoords=[a.animateParam.srcCoords[0]],a.animateParam.index=0}function c(a,b,c){var d=a.getView(),e=50;c&&(e=c<=5?100:c>5&&c<=9?50:0),c&&e>0?d.animate({center:b},{duration:e}):(d.setZoom(15),d.setCenter(b))}function d(a,b){var c=a.getView(),d=c.calculateExtent(a.getSize());return ol.extent.containsCoordinate(d,b)}function e(a,b){var c=a.length;if(c>=2){for(var d,e=0,g=[];e<c-1;e++)d=f(a[e],a[e+1],b),g=g.concat(d);return g}throw new Error("至少包含两个点")}function f(a,b,c){var d,e,f=a[0],g=a[1],h=b[0],i=b[1],j=[a];if(g===i)for(d=f+c,e=g;d<h;)j.push([d,e]),d+=c;else if(f===h)for(d=f,e=g+c;e<i;)j.push([d,e]),e+=c;else{var k=(i-g)/(h-f),l=c/Math.pow(1+k*k,.5),m=l*k;for(d=f+l,e=g+m;d<h;)j.push([d,e]),d+=l,e+=m}return j.push(b),j}function g(a){var b={anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:m,scale:1,opacity:1};return a=wol.util.extend(b,a),new ol.style.Style({image:new ol.style.Icon({anchor:a.anchor,anchorXUnits:a.anchorXUnits,anchorYUnits:a.anchorYUnits,src:a.src,scale:a.scale,opacity:a.opacity})})}function h(a){var b=document.createElement("div");return b.style.width=a.size+"px",b.style.height=a.size+"px",b.className=a.clas,b.style.background="url("+a.icon+") no-repeat",b.style.backgroundSize=a.size+"px",b.style.opacity=a.opacity,b}a.wol=a.wol||{};var i={slow:1,normal:5,fast:10},j=decodeURI(function(){var a=document.getElementsByTagName("script"),b=a[a.length-1];return b.hasAttribute?b.src:b.getAttribute("src")}()),k=j.split("/");k.pop(),k.pop(),k[1]="/";var l=k.join("/"),m=l+"/image/drone.gif";wol.Tracer=function(a){function c(a,c){var d=a.source;if(!(null!==d&&d instanceof ol.Feature&&d.getGeometry()instanceof ol.geom.LineString))return void console.error("参数错误");var g=a.speed;g="slow"===g?i.slow:"normal"===g?i.normal:"fast"===g?i.fast:isNaN(g)?1:parseFloat(g),a.speed=g,f=d;var l=d.getGeometry().getCoordinates(),m=e(l,a.speed);j=new ol.Feature(new ol.geom.LineString([l[0]])),k=new ol.Overlay({element:h({icon:a.icon,clas:a.iconClass,size:a.iconSize,opacity:a.iconOpacity}),position:l[0],positioning:"center-center"}),f.setStyle(o.STATIC_LINE),j.setStyle(o.FLASH_LINE),c.animateParam.speed=a.speed,c.animateParam.srcCoords=m,c.animateParam.tempCoord=m[0],c.animateParam.coordLen=m.length,c.animateParam.flashLineGeom=j.getGeometry(),c.animateParam.flashPointOverlay=k,c.animateParam.afterInitialize=a.afterInitialize,c.animateParam.afterStart=a.afterStart,c.animateParam.afterComplete=a.afterComplete,c.animateParam.ifDynamicTrack=a.ifDynamicTrack,b(c)}var d,f,j,k,l=a,n={source:null,speed:i.normal,afterInitialize:function(){},afterStart:function(){},afterComplete:function(){},icon:m,iconClass:"",iconSize:40,iconOpacity:1,ifDynamicTrack:!1,ifLocate:!1},o={STATIC_LINE:new ol.style.Style({stroke:new ol.style.Stroke({color:"#374f62",width:2,lineDash:[6,4]})}),FLASH_LINE:new ol.style.Style({stroke:new ol.style.Stroke({color:"#23e6a1",width:3})}),FLASH_POINT:g({src:m,opacity:.95})};this.status={initialize:!1,start:!1,animating:!1,complete:!1},this.timer=null,this.animateParam={},this.init=function(b){if(this.status.initialize)return void console.error("轨迹已初始化");b=wol.util.extend(n,b),c(b,this),d=wol.util.createVectorLayer({name:"traceLayer"+(new Date).getTime(),label:"轨迹图层",style:o.STATIC,features:[f,j],updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:25}),a.addLayer(d),a.getMap().addOverlay(k),this.status.initialize=!0,this.animateParam.afterInitialize(),b.ifLocate&&this.getMapViewer().panTo(this.animateParam.tempCoord,400)},this.getMapViewer=function(){return l},this.getTraceLayer=function(){return d},this.getTraceSource=function(){return d.getSource()},this.getTraceLine=function(){return f},this.getFlashLine=function(){return j},this.getFlashPoint=function(){}},wol.Tracer.prototype.play=function(){var a=this,b=0;if(!a.status.initialize)return void console.error("轨迹已销毁或未初始化");if(a.status.start){if(a.status.animating)return void console.info("动画正在播放");if(a.status.complete)return void console.info("动画已结束")}else a.status.start=!0,a.animateParam.afterStart(),a.animateParam.ifDynamicTrack?a.getMapViewer().getMap().getView().setZoom(15):(c(a.getMapViewer().getMap(),a.animateParam.tempCoord,a.animateParam.speed),b=100);var e;setTimeout(function(){a.status.animating=!0,a.timer=setInterval(function(){a.animateParam.index<a.animateParam.coordLen-1?(a.animateParam.tempCoord=a.animateParam.srcCoords[a.animateParam.index+1],a.animateParam.flashCoords.push(a.animateParam.tempCoord),a.animateParam.flashLineGeom.setCoordinates(a.animateParam.flashCoords),a.animateParam.flashPointOverlay.setPosition(a.animateParam.tempCoord),a.animateParam.ifDynamicTrack?a.getMapViewer().panTo(a.animateParam.tempCoord,0):(e=d(a.getMapViewer().getMap(),a.animateParam.tempCoord))||c(a.getMapViewer().getMap(),a.animateParam.tempCoord,a.animateParam.speed),a.animateParam.index++):(clearInterval(a.timer),a.status.animating=!1,a.status.complete=!0,a.animateParam.afterComplete())},5)},b)},wol.Tracer.prototype.pause=function(){var a=this;if(!a.status.animating)return void console.error("动画未处于播放状态");clearInterval(a.timer),a.status.animating=!1},wol.Tracer.prototype.reset=function(){var a=this;if(!a.status.initialize)return void console.error("轨迹已销毁或未初始化");clearInterval(a.timer),a.status.start=!1,a.status.animating=!1,a.status.complete=!1,b(a);var c=a.animateParam.srcCoords[0];a.animateParam.flashLineGeom.setCoordinates(a.animateParam.flashCoords),a.animateParam.flashPointOverlay.setPosition(c),a.animateParam.tempCoord=c,a.getMapViewer().panTo(c,600)},wol.Tracer.prototype.clear=function(){var a=this;if(!a.status.initialize)return void console.error("轨迹已销毁或未初始化");clearInterval(a.timer),a.status.initialize=!1,a.status.start=!1,a.status.animating=!1,a.status.complete=!1,b(a);var c=a.getTraceSource();c.removeFeature(a.getTraceLine()),c.removeFeature(a.getFlashLine()),c.removeFeature(a.getFlashPoint())},wol.Tracer.prototype.setStaticStyle=function(a){this.getTraceLine().setStyle(a)},wol.Tracer.prototype.setFlashStyle=function(a){this.getFlashLine().setStyle(a)}}(window),function(a){a.wol=a.wol||{},a.wol.util=a.wol.util||{},wol.util.styles={DEFAULT_STYLE:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(0, 191, 255, 0.5)"}),image:new ol.style.Circle({fill:new ol.style.Fill({color:"#00bfff"}),stroke:new ol.style.Stroke({color:"#bdecff",width:2}),radius:8}),stroke:new ol.style.Stroke({color:"#00bfff",width:3})}),TEXT_STYLE:new ol.style.Style({text:new ol.style.Text({text:"",offsetY:18,font:"14px 微软雅黑",textAlign:"center",fill:new ol.style.Fill({color:"#2d2d2d"})})}),MASK_BLACK:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(0, 0, 0, 0.5)"})})},wol.util.createVectorLayer=function(a){var b={name:void 0,label:"",style:wol.util.styles.DEFAULT_STYLE,features:[],updateWhileAnimating:!0,updateWhileInteracting:!1,useSpatialIndex:!1,opacity:1,visible:!0,zIndex:void 0,group:void 0};a=wol.util.extend(b,a);var c=new ol.layer.Vector({source:new ol.source.Vector({features:a.features,useSpatialIndex:a.useSpatialIndex}),style:a.style,updateWhileAnimating:a.updateWhileAnimating,updateWhileInteracting:a.updateWhileInteracting,opacity:a.opacity,visible:a.visible,zIndex:a.zIndex});return c.set("name",a.name),c.set("label",a.label),c.set("group",a.group),c.set("type","Vector"),c},wol.util.createClusterLayer=function(a){var b={},c={name:void 0,label:"",styleFunction:function(a){var c=a.get("features").length,d=b[c];return d||(d=new ol.style.Style({image:new ol.style.Circle({radius:10,stroke:new ol.style.Stroke({color:"#fff"}),fill:new ol.style.Fill({color:"#3399CC"})}),text:new ol.style.Text({text:c.toString(),fill:new ol.style.Fill({color:"#fff"})})}),b[c]=d),d},features:[],updateWhileAnimating:!0,updateWhileInteracting:!1,opacity:1,visible:!0,zIndex:void 0,group:void 0};a=wol.util.extend(c,a);var d=new ol.layer.Vector({source:new ol.source.Cluster({distance:40,source:new ol.source.Vector({features:a.features})}),style:function(b,c){return a.styleFunction(b,c)},updateWhileAnimating:a.updateWhileAnimating,updateWhileInteracting:a.updateWhileInteracting,opacity:a.opacity,visible:a.visible,zIndex:a.zIndex});return d.set("name",a.name),d.set("label",a.label),d.set("group",a.group),d.set("type","Cluster"),d},wol.util.createXYZLayer=function(a){var b={name:void 0,label:"",url:"",crossOrigin:void 0,minZoom:void 0,maxZoom:void 0,opacity:1,visible:!0,zIndex:void 0,group:void 0};a=wol.util.extend(b,a);var c=new ol.layer.Tile({source:new ol.source.XYZ({url:a.url,crossOrigin:a.crossOrigin,wrapX:a.wrapX,minZoom:a.minZoom,maxZoom:a.maxZoom}),opacity:a.opacity,visible:a.visible,zIndex:a.zIndex});return c.set("name",a.name),c.set("label",a.label),c.set("group",a.group),c.set("type","XYZ"),c},wol.util.createWMSLayer=function(a){var b={name:void 0,label:"",url:"",params:{},serverType:void 0,maxZoom:void 0,opacity:1,visible:!0,zIndex:void 0,group:void 0};a=wol.util.extend(b,a);var c=new ol.layer.Tile({source:new ol.source.TileWMS({url:a.url,params:a.params,serverType:a.serverType,wrapX:a.wrapX,maxZoom:a.maxZoom}),opacity:a.opacity,visible:a.visible,zIndex:a.zIndex});return c.set("name",a.name),c.set("label",a.label),c.set("group",a.group),c.set("type","WMS"),c},wol.util.createMaskLayer=function(a){var b=wol.util.createFeatureFromWKT("POLYGON((115.282079820752 41.0624818532467,115.282079820752 36.6007452585101,119.034581570745 36.6007452585101,119.034581570745 41.0624818532467,115.282079820752 41.0624818532467))");wol.util.transform(b,"EPSG:4326","EPSG:3857");var c={name:void 0,label:"",features:[b],style:wol.util.styles.MASK_BLACK,updateWhileAnimating:!0,updateWhileInteracting:!0,opacity:1,visible:!1,zIndex:1,group:void 0};a=wol.util.extend(c,a);var d=wol.util.createVectorLayer(a);return d.set("name",a.name),d.set("label",a.label),d.set("group",a.group),d.set("type","Mask"),d},wol.util.createHeatMap=function(a){var b={name:void 0,label:"",feature:[],gradient:["#0ff","#00f","#0f0","#ff0","#ff5d3e"],blur:24,radius:10,shadow:300,opacity:1,visible:!0,zIndex:void 0,group:void 0};a=wol.util.extend(b,a);var c=new ol.layer.Heatmap({source:new ol.source.Vector({features:a.features}),gradient:a.gradient,blur:a.blur,radius:a.radius,shadow:a.shadow,opacity:a.opacity,visible:a.visible,zIndex:a.zIndex});return c.set("name",a.name),c.set("label",a.label),c.set("group",a.group),c.set("type","HeatMap"),c},wol.util.createFeatureFromWKT=function(a){return(new ol.format.WKT).readFeature(a)},wol.util.createWKTFromFeature=function(a){return(new ol.format.WKT).writeFeature(a)},wol.util.transform=function(a,b,c){a.getGeometry().transform(b,c)},wol.util.extend=function a(){var b,c,d,e,f,g,h=arguments[0]||{},i=arguments.length,j=1,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[j]||{},j++),"object"==typeof h||jQuery.isFunction(h)||(h={}),j===i&&(h={},j--);j<i;j++)if(null!=(b=arguments[j]))for(c in b)d=h[c],e=b[c],h!==e&&(k&&e&&(jQuery.isPlainObject(e)||(f=jQuery.isArray(e)))?(f?(f=!1,g=d&&jQuery.isArray(d)?d:[]):g=d&&jQuery.isPlainObject(d)?d:{},h[c]=a(k,g,e)):void 0!==e&&(h[c]=e));return h},wol.util.getColorType=function(a){var b=/^(rgb[(]|RGB[(]).+([)])$/,c=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;return b.test(a)?"RGB":c.test(a)?"HEX":"UNKNOWN"},wol.util.toHexColor=function(a){var b=wol.util.getColorType(a);if("RGB"==b){for(var c=a.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),d="#",e=0;e<c.length;e++){var f=Number(c[e]).toString(16);"0"===f&&(f+=f),d+=f}return 7!==d.length&&(d="#000000"),d}if("HEX"!=b)return"#000000";var g=a.replace(/#/,"").split("");if(6===g.length)return a;if(3===g.length){for(var h="#",e=0;e<g.length;e+=1)h+=g[e]+g[e];return h}},wol.util.toRGBColor=function(a){var b=a.toLowerCase(),c=wol.util.getColorType(b);if(b&&"HEX"==c){if(4===b.length){for(var d="#",e=1;e<4;e+=1)d+=b.slice(e,e+1).concat(b.slice(e,e+1));b=d}for(var f=[],e=1;e<7;e+=2)f.push(parseInt("0x"+b.slice(e,e+2)));return"RGB("+f.join(",")+")"}return"RGB(0, 0, 0)"},wol.util.getColorArray=function(a){var b=wol.util.getColorType(a);"HEX"==b?a=wol.util.toRGBColor(a):"RGB"!=b&&(a="RGB(0, 0, 0)");for(var c=a.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),d=0;d<c.length;d++)c[d]=parseInt(c[d]);return c}}(window),function(a){function b(a){for(var b=[],c=0;c<a.length;c++)"Vector"===a[c].type?b.push(wol.util.createVectorLayer(a[c])):"Cluster"===a[c].type?b.push(wol.util.createClusterLayer(a[c])):"XYZ"===a[c].type?b.push(wol.util.createXYZLayer(a[c])):"WMS"===a[c].type?b.push(wol.util.createWMSLayer(a[c])):"Mask"===a[c].type?b.push(wol.util.createMaskLayer(a[c])):"HeatMap"===a[c].type?b.push(wol.util.createHeatMap(a[c])):console.warn("Unsupported type of the layer being created.");return b}function c(a,b){if(b.zoom){var c=new ol.control.Zoom;a.addControl(c)}if(b.scaleLine){var d=new ol.control.ScaleLine;a.addControl(d);var e=document.getElementsByClassName("ol-scale-line");e[0].style.left="11px",e[0].style.bottom="8px"}if(b.overviewMap){var f=new ol.control.OverviewMap;a.addControl(f);var e=document.getElementsByClassName("ol-scale-line");if(e.length>0){document.getElementsByClassName("ol-overviewmap")[0].style.bottom="33px"}}if(b.fullScreen){var g=new ol.control.FullScreen;a.addControl(g)}}a.wol=a.wol||{},wol.MapViewer=function(a,d){var e,f=0,g={projection:"EPSG:3857",center:[13059385.715379057,4734320.828070238],extent:[],layers:[],zoom:void 0,minZoom:void 0,maxZoom:void 0,controls:{zoom:!0,scaleLine:!0,overviewMap:!1,fullScreen:!1}};d=wol.util.extend(!0,g,d),this.callback={},this.getMap=function(){return e},this.getCurZIndex=function(){return f},this.setCurZIndex=function(a){f=a},function(b){var c=new ol.View({center:b.center,projection:b.projection,zoom:b.zoom,minZoom:b.minZoom,maxZoom:b.maxZoom});e=new ol.Map({target:a,logo:!1,view:c,controls:[]})}(d),this.addLayers(b(d.layers)),c(e,d.controls)},wol.MapViewer.prototype.register=function(a,b){this.callback[a]=this.callback[a]?this.callback[a]:[],this.callback[a].push(b)},wol.MapViewer.prototype.getView=function(){return this.getMap().getView()},wol.MapViewer.prototype.getLayers=function(){return this.getMap().getLayers()},wol.MapViewer.prototype.getLayerByName=function(a){for(var b=this.getMap().getLayers(),c=b.getLength(),d=null,e=0;e<c;e++)if(b.item(e).get("name")===a){d=b.item(e);break}return d},wol.MapViewer.prototype.addLayer=function(a){var b=a.getZIndex();if(!b||b<=1){var c=this.getCurZIndex();a.setZIndex(c),this.setCurZIndex(c+1)}this.getMap().addLayer(a);for(var d=this.callback.addLayer||[],e=0;e<d.length;e++)d[e]()},wol.MapViewer.prototype.addLayers=function(a){for(var b=0;b<a.length;b++)this.addLayer(a[b])},wol.MapViewer.prototype.removeLayer=function(a){this.getMap().removeLayer(a);for(var b=this.callback.removeLayer||[],c=0;c<b.length;c++)b[c]()},wol.MapViewer.prototype.removeLayers=function(a){for(var b=0;b<a.length;b++)this.removeLayer(a[b])},wol.MapViewer.prototype.removeLayerByName=function(a){this.getMap().removeLayer(this.getLayerByName(a))},wol.MapViewer.prototype.panTo=function(a,b){var c;c=a instanceof ol.Feature?ol.extent.getCenter(a.getGeometry().getExtent()):a,void 0==b||0==b?this.getView().setCenter(c):this.getView().animate({center:c},{duration:b})},wol.MapViewer.prototype.extentAt=function(a,b){this.getView().fit(a,{size:this.getMap().getSize(),padding:[50,50,50,50],duration:b})}}(window);

//*** That blue eyes exist in the aegean sea! ***//